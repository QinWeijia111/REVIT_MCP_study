## MCP工具调用反馈报告

### 一、工具调用总体情况

__成功调用工具__：15种工具全部成功调用，无完全失败的工具 __总调用次数__：约60次 __主要建模操作__：柱、墙、门、窗、楼板创建，可视化覆盖，尺寸标注

### 二、遇到的问题与改进建议

#### 1. __query_elements工具 - 类别名称不一致__

- __问题__：类别参数需要英文名称而非中文

  - 尝试"柱" → 失败（错误：不支持的类别: 柱）
  - 尝试"StructuralColumns" → 成功但返回空结果
  - 尝试"Columns" → 成功返回16个柱元素

- __影响__：增加了调试时间，需要猜测正确的类别名称

- __建议__：

  - 提供`get_categories`工具列出所有可用类别
  - 在错误信息中提示相近的可用类别
  - 支持中英文类别别名映射

#### 2. __get_rooms_by_level工具 - 空结果处理__

- __问题__：项目无房间数据时返回空数组，但建模流程需要房间信息

- __影响__：家具放置步骤被跳过，无法完整演示工作流

- __建议__：

  - 增加`create_room`工具自动创建房间
  - 在返回空结果时提供创建房间的指导信息
  - 支持批量房间创建功能

#### 3. __坐标精度与单位转换__

- __问题__：所有工具使用毫米单位，但Revit内部使用英尺

- __观察__：工具内部已正确处理单位转换，用户无需关心

- __建议__：

  - 在工具文档中明确说明单位处理逻辑
  - 增加单位验证，防止异常值输入

#### 4. __ElementId管理__

- __问题__：需要手动记录ElementId用于后续操作

- __影响__：复杂建模时ElementId管理繁琐

- __建议__：

  - 增加`batch_create`工具支持批量创建
  - 提供`get_recent_elements`获取最近创建的元素
  - 支持元素分组和标签功能

#### 5. __错误信息可读性__

- __问题__：部分错误信息为中文，与英文工具名不一致

- __示例__："错误: QueryElements 错误: 不支持的类别: 柱"

- __建议__：

  - 统一错误信息语言（建议英文）
  - 增加错误代码和详细说明
  - 提供错误解决建议

### 三、工具稳定性评估

- __高稳定性工具__：create_wall, create_column, create_door, create_window, create_floor
- __中等稳定性工具__：query_elements（需要正确类别名）
- __依赖数据工具__：get_rooms_by_level（依赖房间数据存在）

### 四、新增工具建议

1. __get_categories__ - 获取所有可用元素类别
2. __create_room__ - 自动创建房间并计算面积
3. __batch_create__ - 批量创建同类元素
4. __validate_model__ - 模型规范性检查
5. __export_view__ - 导出当前视图为图像

### 五、开发优先级

1. __高优先级__：解决类别名称问题，增加错误信息指导
2. __中优先级__：增加房间创建功能，完善空数据处理
3. __低优先级__：批量操作和高级建模功能

此反馈基于实际建模任务中的工具调用体验，旨在帮助改进MCP工具的易用性和功能性。
